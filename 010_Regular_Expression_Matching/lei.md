Ideas
=====

Use the idea of state machine.